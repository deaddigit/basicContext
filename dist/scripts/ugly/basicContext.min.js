"use strict";!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):window[t]=e()}("basicContext",function(){var t=null,e="item",n="separator",i="header",l=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+t)},o=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],l=0===Object.keys(t).length;return l===!0&&(t.type=n),"header"==t.type&&(t.Type=i),null==t.type&&(t.type=e),null==t["class"]&&(t["class"]=""),t.visible!==!1&&(t.visible=!0),null==t.icon&&(t.icon=null),null==t.title&&(t.title="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),null!=t.fn||t.type===n||t.type===i||t.disabled!==!1||(console.warn("Missing fn for item '"+t.title+"'"),!1)},r=function(t,l){var r="",a="";return o(t)===!1?"":t.visible===!1?"":(t.num=l,null!==t.icon&&(a="<span class='basicContext__icon "+t.icon+"'></span>"),t.type===e?r="\n\t\t       <tr class='basicContext__item "+t["class"]+"'>\n\t\t           <td class='basicContext__data' data-num='"+t.num+"'>"+a+t.title+"</td>\n\t\t       </tr>\n\t\t       ":t.type===n?r="\n\t\t       <tr class='basicContext__item basicContext__item--separator'></tr>\n\t\t       ":t.type===i&&(r='\n\t\t       <tr class=\'basicContext__item basicContext__item--header\'> <td class="basicContext__item--header-text" style="color: '+(t.color?t.color:"black")+'"> '+t.title+" </td></tr>\n\t\t       "),r)},a=function(t){var e="";return e+="\n\t        <div class='basicContextContainer'>\n\t            <div class='basicContext'>\n\t                <table>\n\t                    <tbody>\n\t        ",t.forEach(function(t,n){return e+=r(t,n)}),e+="\n\t                    </tbody>\n\t                </table>\n\t            </div>\n\t        </div>\n\t        "},c=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==e.x||null==e.y)){var n=t.changedTouches;null!=n&&n.length>0&&(e.x=n[0].clientX,e.y=n[0].clientY)}return(null==e.x||e.x<0)&&(e.x=0),(null==e.y||e.y<0)&&(e.y=0),e},s=function(t,e){var n=c(t),i=n.x,l=n.y,o={width:window.innerWidth,height:window.innerHeight},r={width:e.offsetWidth,height:e.offsetHeight};i+r.width>o.width&&(i-=i+r.width-o.width),l+r.height>o.height&&(l-=l+r.height-o.height),r.height>o.height&&(l=0,e.classList.add("basicContext--scrollable"));var a=n.x-i,s=n.y-l;return{x:i,y:l,rx:a,ry:s}},d=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null!=t.fn&&(t.visible!==!1&&(t.disabled!==!0&&(l("td[data-num='"+t.num+"']").onclick=t.fn,l("td[data-num='"+t.num+"']").oncontextmenu=t.fn,!0)))},u=function(e,n,i,o){var r=a(e);document.body.insertAdjacentHTML("beforeend",r),null==t&&(t=document.body.style.overflow,document.body.style.overflow="hidden");var c=l(),u=s(n,c);return c.style.left=u.x+"px",c.style.top=u.y+"px",c.style.transformOrigin=u.rx+"px "+u.ry+"px",c.style.opacity=1,null==i&&(i=y),c.parentElement.onclick=i,c.parentElement.oncontextmenu=i,e.forEach(d),"function"==typeof n.preventDefault&&n.preventDefault(),"function"==typeof n.stopPropagation&&n.stopPropagation(),"function"==typeof o&&o(),!0},f=function(){var t=l();return null!=t&&0!==t.length},y=function(){if(f()===!1)return!1;var e=document.querySelector(".basicContextContainer");return e.parentElement.removeChild(e),null!=t&&(document.body.style.overflow=t,t=null),!0};return{ITEM:e,SEPARATOR:n,show:u,visible:f,close:y}});